let selectedItems = [];



const menuDatabase = [
 {
    name: "สเต็กเนื้อวัว",
    ingredients: ["เนื้อวัว"],
    image: "img11/steak.jpg",
    recipe:"ขั้นตอนการทำ: 1. นำเนื้อวัวมาล้างและซับน้ำให้แห้ง2. หมักเนื้อวัวกับเกลือ พริกไทย และน้ำมันมะกอก ประมาณ 15 นาที3. ตั้งกระทะหรือเตาย่างให้ร้อน4. วางเนื้อบนกระทะ ปิ้งด้านละ 3-5 นาที (ขึ้นอยู่กับความหนาและความสุกที่ต้องการ)5. พลิกอีกด้านและปิ้งจนสุกตามชอบ6. ตักใส่จาน เสิร์ฟพร้อมซอสหรือผักเคียง"
  },
  {
    name: "สลัดผักกาด",
    ingredients: ["ผักกาด", "มะเขือเทศ", "มะนาว"],
    image: "img11/salad.jpg",
    recipe: "ขั้นตอนการทำ:1. ล้างผักกาดและมะเขือเทศให้สะอาด2. หั่นผักกาดเป็นชิ้นพอดีคำ หั่นมะเขือเทศเป็นชิ้นเล็ก3. ใส่ผักลงในชามใหญ่4. บีบน้ำมะนาวและเติมน้ำมันมะกอกเล็กน้อย5. คลุกเคล้าให้เข้ากัน6. ตักใส่จาน พร้อมตกแต่งด้วยผักชีหรือพริกไทยป่น"
  },
  {
    name: "ไข่เจียวผักรวม",
    ingredients: ["ไข่", "ผักกาด", "หัวหอม", "พริก"],
    image: "img11/omelette.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างผักกาดและหั่นเป็นชิ้นเล็ก 2. สับหัวหอมและพริกให้ละเอียด 3. ตอกไข่ลงในชามแล้วตีให้เข้ากัน 4. ตั้งกระทะบนไฟกลาง ใส่น้ำมันเล็กน้อย 5. ผัดหัวหอมและพริกจนหอม 6. ใส่ผักกาดลงผัดสัก 1-2 นาที 7. เทไข่ลงกระทะ คลุกเบา ๆ ให้ผักและไข่เข้ากัน 8. ทอดจนไข่สุกเหลืองทั้งสองด้าน 9. ตักใส่จาน เสิร์ฟร้อน"
  },
  {
    name: "ไส้กรอกทอด",
    ingredients: ["ไส้กรอก"],
    image: "img11/sausage.jpg",
    recipe: "ขั้นตอนการทำ: 1. หั่นไส้กรอกเป็นชิ้นตามชอบ 2. ตั้งกระทะบนไฟกลาง ใส่น้ำมันเล็กน้อย 3. นำไส้กรอกลงทอดจนเหลืองและกรอบ 4. พลิกให้สุกทั้งสองด้าน 5. ตักใส่จาน พร้อมเสิร์ฟร้อน"
  },
  {
    name: "สลัดไส้กรอกผักกาด",
    ingredients: ["ไส้กรอก", "ผักกาด", "มะเขือเทศ"],
    image: "img11/salad_sausage.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างผักกาดและหั่นเป็นชิ้นพอดีคำ 2. หั่นมะเขือเทศเป็นชิ้นเล็ก 3. หั่นไส้กรอกเป็นแว่นบาง ๆ 4. ใส่ผักกาด มะเขือเทศ และไส้กรอกลงในชามใหญ่ 5. คลุกเคล้ากับน้ำสลัดตามชอบ 6. เสิร์ฟใส่จาน พร้อมตกแต่งด้วยผักชี"
  },
  {
    name: "เนื้อผัดผักรวม",
    ingredients: ["เนื้อวัว", "ผักกาด", "คะน้า", "กระเทียม"],
    image: "img11/beef_veggie.jpg",
    recipe: "ขั้นตอนการทำ: 1. หั่นเนื้อวัวเป็นชิ้นบาง 2. ล้างผักและหั่นเป็นชิ้นพอดีคำ 3. สับกระเทียมให้ละเอียด 4. ตั้งกระทะบนไฟกลาง ใส่น้ำมัน 5. ผัดกระเทียมจนหอม 6. ใส่เนื้อวัวลงผัดจนสุก 7. ใส่ผักลงไปผัดจนสุกกรอบ 8. ปรุงรสด้วยซอสปรุงอาหาร 9. ตักใส่จาน เสิร์ฟร้อน"
  },
  {
    name: "แฮมชีสแซนด์วิช",
    ingredients: ["แฮม", "ชีส", "ขนมปัง", "มะเขือเทศ"],
    image: "img11/ham_cheese.jpg",
    recipe: "1. วางขนมปังลงบนจาน 2. วางแฮมและชีสบนขนมปัง 3. หั่นมะเขือเทศและวางทับ 4. ปิดด้วยขนมปังอีกแผ่น 5. ปิ้งบนกระทะหรือเครื่องปิ้งจนกรอบและชีสละลาย 6. ตัดเป็นชิ้น เสิร์ฟร้อน"
  },
  {
    name: "ปูอัดผักสลัด",
    ingredients: ["ปูอัด", "ผักกาด", "มะนาว"],
    image: "img11/crab_stick.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างผักกาดและหั่นเป็นชิ้น 2. หั่นปูอัดเป็นชิ้นเล็ก 3. จัดผักกาดบนจาน 4. วางปูอัดด้านบน 5. บีบน้ำมะนาวลงไปเล็กน้อย 6. เสิร์ฟสด ๆ พร้อมตกแต่งด้วยพริกหั่นบาง"
  },
  {
    name: "หมูยอทอด",
    ingredients: ["หมูยอ", "น้ำมัน"],
    image: "img11/pork_roll.jpg",
    recipe: "1ขั้นตอนการทำ: 1. หั่นหมูยอเป็นชิ้นพอดีคำ 2. ตั้งกระทะบนไฟกลาง ใส่น้ำมัน 3. ทอดหมูยอจนเหลืองกรอบ 4. พลิกให้สุกทั้งสองด้าน 5. ตักใส่จาน เสิร์ฟร้อน"
  },
  {
    name: "ผัดกะเพราไก่",
    ingredients: ["เนื้อไก่", "กะเพรา", "พริก", "กระเทียม"],
    image: "img11/chicken_basil.jpg",
    recipe: "ขั้นตอนการทำ: 1. หั่นเนื้อไก่เป็นชิ้นเล็ก 2. สับกระเทียมและพริกให้ละเอียด 3. ล้างกะเพราและเด็ดใบ 4. ตั้งกระทะบนไฟกลาง ใส่น้ำมัน 5. ผัดกระเทียมและพริกจนหอม 6. ใส่เนื้อไก่ลงผัดจนสุก 7. ใส่กะเพราลงไป ผัดเร็ว ๆ 8. ปรุงรสด้วยน้ำปลาและน้ำตาลเล็กน้อย 9. ตักใส่จาน เสิร์ฟร้อนกับข้าวสวย"
  },
  {
    name: "มะเขือเทศยำไข่ต้ม",
    ingredients: ["ไข่", "มะเขือเทศ", "ต้นหอม", "มะนาว"],
    image: "img11/tomato_egg.jpg",
    recipe: "ขั้นตอนการทำ: 1. ต้มไข่จนสุก พักให้เย็นแล้วปอกเปลือก 2. หั่นมะเขือเทศและต้นหอมเป็นชิ้น 3. หั่นไข่ต้มเป็นชิ้นพอดีคำ 4. นำไข่ มะเขือเทศ และต้นหอมใส่ชาม 5. บีบน้ำมะนาวและปรุงรสด้วยเกลือเล็กน้อย 6. คลุกให้เข้ากัน เสิร์ฟเย็น"
  },
  {
    name: "ผักบุ้งผัดน้ำมันหอย",
    ingredients: ["ฝักบุ้ง", "กระเทียม", "น้ำมันหอย"],
    image: "img11/morning_glory.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างฝักบุ้งและหั่นเป็นท่อน 2. สับกระเทียมให้ละเอียด 3. ตั้งกระทะบนไฟกลาง ใส่น้ำมัน 4. ผัดกระเทียมจนหอม 5. ใส่ฝักบุ้งลงไปผัดเร็ว ๆ 6. เติมน้ำมันหอยและปรุงรสตามชอบ 7. ผัดจนผักสุกกรอบ ตักใส่จาน เสิร์ฟร้อน"
  },
  {
    name: "คะน้าหมูกรอบ",
    ingredients: ["คะน้า", "เนื้อหมู", "กระเทียม"],
    image: "img11/kana_pork.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างคะน้าและหั่นเป็นท่อน 2. สับกระเทียมให้ละเอียด 3. หั่นหมูกรอบเป็นชิ้น 4. ตั้งกระทะ ใส่น้ำมัน ผัดกระเทียมจนหอม 5. ใส่หมูกรอบลงผัด 6. ใส่คะน้าลงผัดเร็ว ๆ 7. ปรุงรสด้วยซอสปรุงอาหาร 8. ตักใส่จาน เสิร์ฟร้อน"
  },
  {
    name: "โยเกิร์ตผลไม้รวม",
    ingredients: ["โยเกิร์ต", "มะเขือเทศ", "มะนาว"],
    image: "img11/yogurt.jpg",
    recipe: "ขั้นตอนการทำ: 1. หั่นมะเขือเทศเป็นชิ้นเล็ก 2. ใส่โยเกิร์ตลงในชาม 3. เติมมะเขือเทศ 4. บีบน้ำมะนาว 5. คลุกให้เข้ากัน 6.ตักใส่จาน 7.เสิร์ฟ"
  },
  {
    name: "เนื้อปลาอบสมุนไพร",
    ingredients: ["เนื้อปลา","มะนาว","กระเทียม","พริก","ผักชี","ต้นหอม"],
    image: "img11/fish_bake.jpg",
    recipe: "ขั้นตอนการทำ: 1. ล้างเนื้อปลาให้สะอาด ซับน้ำให้แห้ง 2. บีบน้ำมะนาวลงบนเนื้อปลา 1-2 ช้อนโต๊ะ หมักประมาณ 10 นาที 3. สับกระเทียม พริก และต้นหอมให้ละเอียด 4. ผสมสมุนไพรทั้งหมดกับน้ำมันเล็กน้อย ปรุงรสด้วยเกลือและพริกไทย 5. ทาน้ำสมุนไพรลงบนเนื้อปลาให้ทั่วทั้งตัว 6. เตรียมถาดอบ รองด้วยกระดาษฟอยล์ วางปลาใส่ถาด 7. อบที่อุณหภูมิ 180°C ประมาณ 15-20 นาที หรือจนสุกทั่ว 8. โรยผักชีสดด้านบนก่อนเสิร์ฟ 9. เสิร์ฟร้อน ๆ พร้อมข้าวสวยหรือสลัด"
  },
  {
    name: "กะหล่ำปลีทอดกรอบ",
    ingredients: ["กะหล่ำปลี"],
    image: "img11/fish_bake.jpg",
    recipe: "วิธีทำ: 1.แยกใบกะหล่ำปลี 2.ล้างและซับน้ำ 3.ตั้งน้ำมันให้ร้อน ใ4.ส่ใบกะหล่ำปลีลงทอดจนกรอบ 5.โรยเกลือและพริกป่น 6.คลุกให้เข้ากัน 7.ทิ้งให้เย็นแล้วเสิร์ฟเป็นของว่าง"
  }
];


function chooseItem(item) {
  // toggle (กดซ้ำเพื่อเอาออก)
  if (selectedItems.includes(item)) {
    selectedItems = selectedItems.filter(i => i !== item);
  } else {
    selectedItems.push(item);
  }
  updateDisplay();
}

function updateDisplay() {
  document.getElementById("selectedItems").innerText =
    "คุณเลือก: " + (selectedItems.length ? selectedItems.join(', ') : '-');
  document.getElementById("itemInput").value = selectedItems.join(', ');
}

function submitItem() {
  let inputText = document.getElementById("itemInput").value.trim();
  if (inputText) {
    const inputItems = inputText
      .split(',')
      .map(i => i.trim())
      .filter(i => i);
    selectedItems = Array.from(new Set([...selectedItems, ...inputItems]));
  } else {
    alert("กรุณาเลือกหรือพิมพ์สิ่งที่คุณมี");
    return;
  }

  // หาเมนูที่ทำได้ (แม้เลือกไม่ครบ)
  const possibleMenus = menuDatabase
    .map(menu => {
      const matchCount = menu.ingredients.filter(ing => selectedItems.includes(ing)).length;
      return { ...menu, matchCount };
    })
    .filter(menu => menu.matchCount > 0)  // มีวัตถุดิบตรงกันอย่างน้อย 1 อย่าง
    .sort((a,b) => b.matchCount - a.matchCount); // เรียงจากตรงมากที่สุดไปน้อยที่สุด

  const menuResultsDiv = document.getElementById("menuResults");
  menuResultsDiv.innerHTML = ""; // ล้างผลลัพธ์เก่า

  if (possibleMenus.length > 0) {
    possibleMenus.forEach(menu => {
      const menuDiv = document.createElement("div");
      menuDiv.classList.add("menu-item");

      menuDiv.innerHTML = `
        <img src="${menu.image}" alt="${menu.name}">
        <div class="recipe">
          <h3>${menu.name}</h3>
          <p>${menu.recipe}</p>
          
        </div>
      `;

      menuResultsDiv.appendChild(menuDiv);
    });
  } else {
    menuResultsDiv.innerHTML = "<p>ไม่มีเมนูที่ตรงกับสิ่งที่คุณเลือก</p>";
  }

  // รีเซ็ตการเลือก
  selectedItems = [];
  document.getElementById("itemInput").value = '';
  document.getElementById("selectedItems").innerText = "คุณเลือก: -";
}

